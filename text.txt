'use client'
import { useEffect, useState } from "react";
import MenuProps from "../components/MenuProps";

export default function Menu() {
  const [carrito, setCarrito] = useState([]);

  useEffect(() => {
    const carritoLS = JSON.parse(localStorage.getItem("carrito")) || [];
    setCarrito(carritoLS);
  }, []);

  useEffect(() => {
    localStorage.setItem("carrito", JSON.stringify(carrito));
  }, [carrito]);

  const agregarCarrito = (platoSeleccionado) => {
    const itemExists = carrito.some((articulo) => articulo.id === platoSeleccionado.id);

    if (itemExists) {
      const carritoActualizado = carrito.map((articulo) =>
        articulo.id === platoSeleccionado.id ? platoSeleccionado : articulo
      );
      setCarrito(carritoActualizado);
    } else {
      setCarrito([...carrito, platoSeleccionado]);
    }

    console.log("Plato agregado al carrito:", platoSeleccionado);

    console.log(carrito)
    
  };

  return (
    <div>
      <MenuProps agregarCarrito={agregarCarrito} />
    </div>
  );
}


 const agregarCarrito = (platoSeleccionado) => {
    const itemExists = carrito.some((articulo) => articulo.id === platoSeleccionado.id);

    if (itemExists) {
      const carritoActualizado = carrito.map((articulo) =>
        articulo.id === platoSeleccionado.id ? platoSeleccionado : articulo
      );
      setCarrito(carritoActualizado);
    } else {
      setCarrito([...carrito, platoSeleccionado]);
    }

    console.log("Plato agregado al carrito:", platoSeleccionado);
    console.log(carritoGlobal)

  };

  agregarCarrito={agregarCarrito} 


  import { useEffect, useState } from "react";

export let carritoGlobal = []; // Definir una variable para almacenar el estado del carrito

export default function Menu() {
  const [carrito, setCarrito] = useState([]);

  useEffect(() => {
    const carritoLS = JSON.parse(localStorage.getItem("carrito")) || [];
    setCarrito(carritoLS);
  }, []);

  useEffect(() => {
    localStorage.setItem("carrito", JSON.stringify(carrito));
    carritoGlobal = carrito; // Actualizar el valor de carritoGlobal cuando el carrito cambie
  }, [carrito]);

  const agregarCarrito = (platoSeleccionado) => {
    const itemExists = carrito.some((articulo) => articulo.id === platoSeleccionado.id);

    if (itemExists) {
      const carritoActualizado = carrito.map((articulo) =>
        articulo.id === platoSeleccionado.id ? platoSeleccionado : articulo
      );
      setCarrito(carritoActualizado);
    } else {
      setCarrito([...carrito, platoSeleccionado]);
    }

    console.log("Plato agregado al carrito:", platoSeleccionado);
    console.log(carritoGlobal)

  };
